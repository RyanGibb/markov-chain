# markov-chain

## Running

When markov-chain.py is ran as main, e.g. 

```
python3 markov_chain.py
```

It takes training data from standard input, trains a markov chain, and outputs data generated by traversing that markov chain.

When used as part of another program, or from the python3 interative shell, the functions are used directly. E.g.

```
Python 3.7.2 (default, Jan  3 2019, 09:14:01) 
[GCC 8.2.1 20181215 (Red Hat 8.2.1-6)] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import markov_chain
>>> markov_chain.train(open("pride-and-prejudice.txt").read())
>>> markov_chain.generate(100)
 wh a mulyothevisers ougr ier, beish Bisay t ft u beroner se. ak avaly
r
hever od I tllay wen nenutm>>> 
```

## Analysis

The generated data is crude at best. There is no sensible start / finish - each are selected randomly. The chain only knows it's order number of characters back. So quotations and other punctation rarely make sense. Some words are mashed together from other components (see "enterruption" from Example 6). 

It is interesting to see how this stochastic/statistical model can be used as a makeshift AI and for machine learning, though.

## Examples

Books (training data) was obtained from www.gutenberg.org, and had their meta data removed.

### Example 1

Pride and Prejudice. Markov chain of order 1. Generate 100 events.

Command:
```
cat pride-and-prejudice.txt | python3 markov_chain.py 1 100
```

Pipes Pride and Prejudice (with meta data removed) into the program, with arguments to train a markov chain of order 3 and generate 100 events (groups of 3 characters, as order 3).

Traverse the markov chain to generate an output of length 300 (as order 3 and 100 events).

Output:
```
he, bleromery
whed? ot
“Weacedgr.
bllye sil ay, ho rchay

pr ithise
Brr our ctoved of Ly, cand
```

### Example 2

Pride and Prejudice. Markov chain of order 2. Generate 100 events.

Output:
```
ned vantere provoking in; an wite thing only,
beached so
prancead yes such evenishme of surpria ch awas stand dres
It it to sain, absences, was be at elsehave inion.”
```

### Example 3

Pride and Prejudice. Markov chain of order 3. Generate 100 events.

Output:
```
h an a hurt, give. You
are town to thing of sometherful voice with the known him; and mance.

“Mr. and I know myself, have head to decial shall the say have no otherself that
wonday reasonagemention--and they appily the as too well repart of him to giving before ent you, whole parison we winto t
```

### Example 4

Pride and Prejudice. Markov chain of order 6. Generate 50 events.

Output:
```
 which might all sat down, unable to encourage to announce their
mother's
decease, is all. I have none of its narrowest part
of the room,
“is your mother should be better than what we
sharers of our intimacy was of consulting himself in love with her, from their respective houses; after going o
```

### Example 5

As can bee seen, the results get more coherent with a larger order, as more complicated patterns can be recognised.

If the order is made too large, however, the markov chain will simiply be memorising chunks of the passage.

Pride and Prejudice. Markov chain of order 100. Generate 1 events.

Output
```
ng to the silent contemplation of his
successful love; for Mrs. Bennet, having dawdled about in the
```

Running:
```
cat pride-and-prejudice.txt | grep "ng to the silent contemplation of his
> successful love; for Mrs. Bennet, having dawdled about in the"
```

Show us that this is indeed not some masterwork created by the markov chain, but just a chunk of prose memorised.

### Example 6

Finally, let's see what the program can generate from 3 books with an order of 4.

Command:
```
cat pride-and-prejudice.txt frakenstein.txt a-tale-of-two-cities.txt | python3 markov_chain.py 4 1000
```

Output:
```
“Not detected, Monseigneur, his
beings shall be officed.”

Mr. Carton's Bank by the communication.

Her aunt away from then received, and wife, which complimes.
                  *****

“What I shall fine found a rank gently fiending to be has been until I had
misery, you know myself through to talk, and in his house suspect to the street, who lives withough untity of that
callest as you are part in the occasion of her mother way
to you should preserve it, and some opinion, indeed, still an evening a part of their
haunt to myself from all the ceremonde at La Force. He could
and strong around the feeling him, turnkeys, and the
scene of whom with him,
every kind of his own, and would his
wife, I should here, are a luxuries, and I don't expectation with him in a serval was in a few momen floppiness day; but she has daily murdered to executions, two patriot without my own he had I now founds through their
name officer! look the
cruelly
deliberated by that she
arrived, my duty of August 26th, and entered also with a degrees in a
farmer's
concerning the house. He hastened it. Here alone at Netherfield as his
modern
in peaceful business for the ground
the power
for venge, he scene of such admire.

Her up
the sun that “he would
nevere, but that
its concerning over. I'm not accountry,” he urgent it, to Rosing of
there gone wrote and
we shall be
coming. He had not wished
on had perhaps. I have been me a mercy admirer more.

“He is also at the moment surely sway over hand Hertfordshire.”

The said under that he musketch. Yet I knew that they look at himself, and I will not make of that scandard got down herself,
announcing looked, and clashing love their last drops
of Death; the had an eyes that child, a
conscience, on his daughted and
be instant and think the other, had this dimly
perself so very grations, befalled thus dispute. My
daughter and there, whom Doctor Manette, “as I gaspect right, and Lydia, was _not_. But if you can into its were occasions in him by birds of the man obliged to be pleased them,
for him; and his tomb of “Good!” cried Elizabeth called eye so full
dinner, who will get Miss Bingley, in this consent towards her
story of the days anxiety; and Miss Pross's schemes, which the belonged gentlement to check scarcely visited their weapon the scene joy. If she firmative force in his
times
when yawned as is a pair faces are
requited. He stool, might.”

“The Trial, or
talked.

I enterruption, with tears. “On the crept a father’s fellowed at he may read
inter, and her serenewed.”

“Oh, not illustration, stammere progress.  He absolutely Denny and barely exclaimed their mother were boy on him for pictured, and had all known
was. He showever, “and sent flashed a small modical
pretty years, as the
otherself to a blessing in favoured for that had proportion is? But Jane was if he rather, on one doomed by
ears, turned with an even life in a basked a hurriedly task; and in the
function, a blades as their wicked, but always the subject.

Elizabeth happy salutation, he same to a mous
else-deserve happen.  He
had caping the deserve to appally be desire will scarcely and
softly for it on his turned
and directly and about
these little, and here as five
always together sideration for the person leave, my project.  I knew it could
barbarous friend that science of attachedness, but I
genial to Mrs. Gardiner's shoe. There in the steading heads me with correction have been perfectly finished; the peasant back the
Bank close long us!” critically, I knew and to be letter spite
reject it from my eye those which was was no impostors, in to those counter and that does now?” asked the
avenues on Carton, which the streets, I shall; and I bought see him with slow to hammad. “Touch to longer, and their nearer trials, I
delicate a little surprised, taking him before his lustre that Lady Cather.

“Ay, sir,” said, friends or immense
appear in a complighter direct res
```

## Binary Usage

Example with the iteractive interpreter:
```
Python 3.7.1 (default, Nov 23 2018, 10:01:49) 
[GCC 8.2.1 20181105 (Red Hat 8.2.1-5)] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from markov_chain import *
>>> train(open("binary", "rb").read(), 100)
>>> generate("binary_output", 100000)
```

This was tried with a raw audio binary file obtained from an mp3.

To get the file, encoded in 16 bit stereo:
```
mpg123 *.mp3 > binary
```

To play raw audio binary files:
```
cat binary | aplay -f cd
```

The results from binary output were underwhelming. The markov chain is too simplistic to be able to generate anything but static without a chain size too large for my computer (with 8Gb RAM and Swap file).
